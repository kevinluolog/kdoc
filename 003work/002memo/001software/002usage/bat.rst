
***************
batch
***************

.. contents:: 目录
.. section-numbering::

.. 
 :Author: kevinluo
 :Contact: kevinluo_72@163.com

.. 
 .. contents:: 目录
 .. section-numbering::


tips
====

%cd%和%~dp0的区别
-----------------

<https://www.jianshu.com/p/5a1a882ead95>

1. %cd% 可以用在批处理文件中，也可以用在命令行中；
   
   展开后，是驱动器盘符:+当前目录，如在dos窗口中进入c:\dir目录下面，

   输入：echo %cd% ，则显示为：c:\dir 。
 
2. %~dp0只可以用在批处理文件中，它是由它所在的批处理文件的目录位置决定的，是批处理文件所在的盘符:+路径。在执行这个批处理文件的过程中，它展开后的内容是不会改变的。



pushd "%~dp0" popd
------------------

进入执行文件所在目录，并且把老年目录推入目录栈，popd就是回到原先的目录

<https://www.cnblogs.com/suanec/p/8026964.html>

pushd和popd在linux中可以用来方便地在多个目录之间切换。


setlocal enabledelayedexpansion
-------------------------------------------

是扩展本地环境变量延迟, !!引用
<https://www.jb51.net/article/29323.htm>


%CD% 引用当前目录，可用在CMD直接进启动目录
---------------------------------------------

if "%CD%\"=="%~dp0" cd /d "%HOMEDRIVE%%HOMEPATH%"


Setlocal 与 Endlocal 命令
-----------------------------

开始与终止批处理文件中环境改动的本地化操作。在执行 Setlocal 之后所做的环境改动只限于批处理文件。要还原原先的设置，必须执行 Endlocal。达到批处理文件结尾时，对于该批处理文件的每个尚未执行的 Setlocal 命令，都会有一个隐含的 Endlocal 被执行。

复合语句连接符（&、&&和||）
------------------------------

- & [...] command1 & command2

  用来分隔一个命令行中的多个命令。Cmd.exe 运行第一个命令，然后运行第二个命令。

- && [...] command1 && command2

  只有在符号 && 前面的命令成功时，才用于运行该符号后面的命令。Cmd.exe 运行第一个命令，然后只有在第一个命令运行成功时才运行第二个命令。

- || [...] command1 || command2

  只有在符号 || 前面的命令失败时，才用于运行符号 || 后面的命令。Cmd.exe 运行第一个命令，然后只有在第一个命令未能运行成功（接收到大于零的错误代码）时才运行第二个命令。

cmd命令太长分成多行的写法
-----------------------------

连接符是“^”

::

  ec^
  ho hello world
  pause